<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HKD Invoice Management</title>
<style>
body{font-family:Arial;margin:0;padding:0;}
header{background:#0078D7;color:white;padding:10px;font-size:20px;}
nav{display:flex;background:#f0f0f0;}
nav button{flex:1;padding:10px;border:none;background:#f0f0f0;cursor:pointer;}
nav button.active{background:#0078D7;color:white;}
section.tab-content{display:none;padding:10px;}
section.tab-content.active{display:block;}
table{border-collapse:collapse;width:100%;margin-top:10px;}
th,td{border:1px solid #ccc;padding:5px;text-align:left;}
#log{height:150px;overflow:auto;border:1px solid #ccc;margin-top:10px;padding:5px;background:#f9f9f9;}
</style>
</head>
<body>
<header>HKD Invoice Management</header>

<input type="file" id="zipInput" multiple accept=".zip">
<div id="log"></div>

<nav>
  <button class="tab-btn active" data-tab="hoadon">Hóa đơn</button>
  <button class="tab-btn" data-tab="tonkho">Kho</button>
  <button class="tab-btn" data-tab="xuathang">Xuất hàng</button>
  <button class="tab-btn" data-tab="ketoan">Kế toán</button>
</nav>

<section id="hoadon" class="tab-content active">
  <h2>Danh sách hóa đơn</h2>
  <div id="hoadonTable"></div>
</section>

<section id="tonkho" class="tab-content">
  <h2>Chi tiết tồn kho</h2>
  <div id="tonkhoTable"></div>
</section>

<section id="xuathang" class="tab-content">
  <h2>Xuất hàng</h2>
  <div id="xuathangTable"></div>
</section>

<section id="ketoan" class="tab-content">
  <h2>Kế toán</h2>
  <div id="ketoanTable"></div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="zip-trichxuat.js"></script>
<script src="hoadon.js"></script>
<script src="tonkho.js"></script>
<script src="xuathang.js"></script>
<script src="ketoan.js"></script>
<script>
const tabs = document.querySelectorAll('.tab-btn');
tabs.forEach(btn=>{
  btn.addEventListener('click',()=>{
    tabs.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(sec=>sec.classList.remove('active'));
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

// Tự động xử lý khi chọn file ZIP
document.getElementById('zipInput').addEventListener('change', async (e)=>{
  const files = Array.from(e.target.files);
  if(files.length) await handleZipFiles(files);
  if(window.renderHoadon) window.renderHoadon();
  if(window.renderTonkho) window.renderTonkho();
  if(window.renderXuatHang) window.renderXuatHang();
  if(window.renderKeToan) window.renderKeToan();
});
</script>
</body>
</html>