<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tr√≠ch xu·∫•t XML H√≥a ƒê∆°n</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f7f7f7; }
    h2 { margin-top: 30px; }
    textarea { width: 100%; height: 200px; font-family: monospace; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 8px; font-size: 14px; }
    th { background: #eee; }
    .indent { padding-left: calc(var(--level) * 20px); }
  </style>
</head>
<body>

  <h2>üîç T·∫£i file XML h√≥a ƒë∆°n:</h2>
  <input type="file" id="xmlFile" accept=".xml">
  
  <h2>üìÑ N·ªôi dung XML g·ªëc:</h2>
  <textarea id="xmlRaw" readonly></textarea>

  <h2>üìã B·∫£ng tr√≠ch xu·∫•t chi ti·∫øt:</h2>
  <table id="xmlTable">
    <thead>
      <tr>
        <th>STT</th>
        <th>T√™n th·∫ª</th>
        <th>Gi√° tr·ªã</th>
        <th>Thu·ªôc t√≠nh</th>
        <th>ƒê·ªô s√¢u</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    document.getElementById("xmlFile").addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function (event) {
        const xmlText = event.target.result;
        document.getElementById("xmlRaw").value = xmlText;

        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, "text/xml");

        const tbody = document.querySelector("#xmlTable tbody");
        tbody.innerHTML = "";

        let count = 0;
        function walk(node, depth = 0) {
          if (node.nodeType === 1) { // element node
            const tag = node.nodeName;
            const value = (node.textContent || "").trim();
            const attrs = Array.from(node.attributes || []).map(attr => `${attr.name}="${attr.value}"`).join(" ");
            const row = document.createElement("tr");
            row.innerHTML = `
              <td>${++count}</td>
              <td style="--level:${depth}" class="indent">${tag}</td>
              <td>${value}</td>
              <td>${attrs}</td>
              <td>${depth}</td>
            `;
            tbody.appendChild(row);
            for (const child of node.children) walk(child, depth + 1);
          }
        }

        const root = xmlDoc.documentElement;
        walk(root);
      };
      reader.readAsText(file);
    });
  </script>

</body>
</html>