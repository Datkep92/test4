<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω H√≥a ƒê∆°n ƒêi·ªán T·ª≠</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <div class="sidebar">
        <div class="sidebar-header">
            <h3>DANH S√ÅCH C√îNG TY</h3>
        </div>
        <div class="company-list" id="company-list">
            <div class="company-item">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
        </div>
        <div class="sidebar-footer" style="padding: 20px; border-top: 1px solid #ddd;">
            <button id="clear-all-data" class="btn-danger" style="width: 100%;">X√≥a H·∫øt D·ªØ Li·ªáu</button>
        </div>
    </div>
    
    <div class="main-content">
        <div class="header">
            <div class="header-content">
                <div class="logo">H·ªÜ TH·ªêNG QU·∫¢N L√ù H√ìA ƒê∆†N ƒêI·ªÜN T·ª¨</div>
                <div class="current-company" id="current-company">Ch·ªçn c√¥ng ty ƒë·ªÉ xem th√¥ng tin</div>
            </div>
        </div>
        
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="trich-xuat">Tr√≠ch Xu·∫•t Hƒê</div>
            <div class="nav-tab" data-tab="hoadon">Qu·∫£n L√Ω H√≥a ƒê∆°n</div>
            <div class="nav-tab" data-tab="ton-kho">Qu·∫£n L√Ω T·ªìn Kho</div>
            <div class="nav-tab" data-tab="xuat-hang">Xu·∫•t H√†ng</div>
            <div class="nav-tab" data-tab="ke-toan">K·∫ø To√°n & B√°o C√°o</div>
        </div>
        
        <div class="tab-content active" id="trich-xuat">
            <div class="content-header">
                <h2>Tr√≠ch Xu·∫•t H√≥a ƒê∆°n ƒêi·ªán T·ª≠</h2>
            </div>
            <div class="content-body">
                <div class="card">
                    <div class="card-header">1. Ch·ªçn File H√≥a ƒê∆°n (ZIP/XML)</div>
                    <div class="form-group">
                        <input type="file" id="zip-file-input" multiple accept=".zip, .xml">
                    </div>
                    <button id="process-files" class="btn-primary">B·∫Øt ƒê·∫ßu Tr√≠ch Xu·∫•t & C·∫≠p Nh·∫≠t H·ªá Th·ªëng</button>
                </div>
                
                <div class="card" id="file-stats">
                    <div class="card-header">2. Th·ªëng K√™ X·ª≠ L√Ω</div>
                    <div class="stats-grid">
                        <p>T·ªïng s·ªë file: <span id="total-files" class="stat-number">0</span></p>
                        <p class="text-success">Th√†nh c√¥ng: <span id="success-count" class="stat-number">0</span></p>
                        <p class="text-warning">Tr√πng l·∫∑p: <span id="duplicate-count" class="stat-number">0</span></p>
                        <p class="text-danger">L·ªói: <span id="error-count" class="stat-number">0</span></p>
                        <p class="text-info">ƒê√£ chuy·ªÉn kho: <span id="stock-posted-count" class="stat-number">0</span></p>
                    </div>
                </div>
                
                <div class="card hidden" id="file-results-card">
                    <div class="card-header">3. Chi Ti·∫øt K·∫øt Qu·∫£</div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Tr·∫°ng Th√°i</th>
                                <th>Chi Ti·∫øt</th>
                            </tr>
                        </thead>
                        <tbody id="file-results-list">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Tab H√≥a ƒê∆°n -->
        <div class="tab-content" id="hoadon">
            <div class="content-header">
                <h2>Qu·∫£n L√Ω H√≥a ƒê∆°n Nh·∫≠p - <span id="company-name-hoadon"></span></h2>
            </div>
            <div class="content-body">
                <div class="card">
                    <!-- Th·ªëng k√™ h√≥a ƒë∆°n -->
                    <div id="invoice-stats"></div>
                    
                    <div class="form-group">
                        <label for="search-invoice">T√¨m ki·∫øm H√≥a ƒë∆°n (M·∫´u/S·ªë/MST/T√™n)</label>
                        <input type="text" id="search-invoice" placeholder="Nh·∫≠p K√Ω hi·ªáu, S·ªë Hƒê, MST ho·∫∑c T√™n ng∆∞·ªùi b√°n...">
                    </div>
                    
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>S·ªë Hƒê</th>
                                <th>Ng√†y</th>
                                <th>Nh√† cung c·∫•p</th>
                                <th>MST NCC</th>
                                <th>Lo·∫°i Hƒê</th>
                                <th>PTTT</th>
                                <th>T·ªïng ti·ªÅn (VAT)</th>
                                <th>Thu·∫ø</th>
                                <th>Chi·∫øt kh·∫•u</th>
                                <th>Ch√™nh l·ªách</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="invoice-list">
                            <tr><td colspan="12" style="text-align: center;">Vui l√≤ng ch·ªçn c√¥ng ty v√† nh·∫≠p h√≥a ƒë∆°n</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab T·ªìn Kho -->
        <div class="tab-content" id="ton-kho">
            <div class="content-header">
                <h2>Qu·∫£n L√Ω T·ªìn Kho Hi·ªán T·∫°i - <span id="company-name-tonkho"></span></h2>
            </div>
            <div class="content-body">
                <div class="card">
                    <!-- Th·ªëng k√™ t·ªìn kho -->
                    <div id="stock-stats"></div>
                    
                    <!-- N√∫t l·ªçc -->
                    <div class="stock-filter-buttons">
                        <button class="stock-filter-btn active" data-filter="all">T·∫•t c·∫£</button>
                        <button class="stock-filter-btn" data-filter="normal">H√†ng h√≥a</button>
                        <button class="stock-filter-btn" data-filter="ck">Chi·∫øt kh·∫•u</button>
                        <button class="stock-filter-btn" data-filter="km">Khuy·∫øn m√£i</button>
                    </div>

                    <div class="form-group">
                        <label for="search-stock">T√¨m ki·∫øm S·∫£n ph·∫©m (M√£/T√™n)</label>
                        <input type="text" id="search-stock" placeholder="Nh·∫≠p M√£ SP ho·∫∑c T√™n SP...">
                    </div>

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ SP</th>
                                <th>T√™n h√†ng h√≥a</th>
                                <th>ƒêVT</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>ƒê∆°n gi√° nh·∫≠p</th>
                                <th>Chi·∫øt kh·∫•u</th>
                                <th>T·ª∑ l·ªá CK</th>
                                <th>Th√†nh ti·ªÅn (tr∆∞·ªõc thu·∫ø)</th>
                                <th>Thu·∫ø (%)</th>
                                <th>Gi√° sau thu·∫ø</th>
                                <th>Gi√° b√°n ƒë·ªÅ xu·∫•t</th>
                                <th>Ph√¢n lo·∫°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="stock-list">
                            <tr><td colspan="14" style="text-align: center;">Ch∆∞a c√≥ d·ªØ li·ªáu t·ªìn kho</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab Xu·∫•t H√†ng -->
        <div class="tab-content" id="xuat-hang">
            <div class="content-header">
                <h2>Qu·∫£n L√Ω Xu·∫•t H√†ng - <span id="company-name-xuathang"></span></h2>
            </div>
            <div class="content-body">
                <div class="card">
                    <div class="card-header">1. T·∫°o Phi·∫øu Xu·∫•t Kho M·ªõi</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="export-date">Ng√†y Xu·∫•t</label>
                            <input type="date" id="export-date" value="">
                        </div>
                        <div class="form-group">
                            <label for="export-note">Ghi Ch√∫</label>
                            <input type="text" id="export-note" placeholder="Xu·∫•t b√°n, xu·∫•t m·∫´u...">
                        </div>
                    </div>
                    
                    <div class="card-body">
                        <h4>Ch·ªçn S·∫£n Ph·∫©m C·∫ßn Xu·∫•t</h4>
                        <div id="export-products-list">
                            <p style="text-align: center;">Vui l√≤ng ch·ªçn c√¥ng ty v√† ƒë·∫£m b·∫£o c√≥ s·∫£n ph·∫©m trong kho.</p>
                        </div>
                    </div>

                    <div class="card-footer">
                        <p style="font-size: 1.1em; font-weight: bold;">T·ªïng Gi√° Tr·ªã D·ª± Ki·∫øn: <span id="current-export-total">0 VNƒê</span></p>
                        <button id="create-export" class="btn-success">L∆∞u Phi·∫øu Xu·∫•t H√†ng</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">2. L·ªãch S·ª≠ Phi·∫øu Xu·∫•t</div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>M√£ Phi·∫øu</th>
                                <th>Ng√†y Xu·∫•t</th>
                                <th>Ghi Ch√∫</th>
                                <th>T·ªïng Gi√° Tr·ªã</th>
                                <th>H√†nh ƒê·ªông</th>
                            </tr>
                        </thead>
                        <tbody id="export-history-list">
                            <tr><td colspan="5" style="text-align: center;">Ch∆∞a c√≥ phi·∫øu xu·∫•t n√†o ƒë∆∞·ª£c t·∫°o</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab K·∫ø To√°n & B√°o C√°o - ƒê√É C·∫¨P NH·∫¨T -->
        <div class="tab-content" id="ke-toan">
            <div class="content-header">
                <h2>K·∫ø To√°n & B√°o C√°o T·ªïng Quan - <span id="company-name-ke-toan"></span></h2>
            </div>
            <div class="content-body">
                <!-- Container cho c√°c tab k·∫ø to√°n -->
                <div class="accounting-container">
                    <div class="accounting-tabs">
                        <button class="accounting-tab-btn active" onclick="showAccountingTab('general-ledger')">
                            üìä S·ªï C√°i
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('general-journal')">
                            üìù Nh·∫≠t K√Ω Chung
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('balance-sheet')">
                            ‚öñÔ∏è CƒêKT
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('income-statement')">
                            üí∞ KQKD
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('trial-balance')">
                            üéØ C√¢n ƒê·ªëi TK
                        </button>
                        <!-- C√°c tab m·ªõi t·ª´ module n√¢ng cao -->
                        <button class="accounting-tab-btn" onclick="showAccountingTab('receivable-ledger')">
                            üë• C√¥ng N·ª£ Ph·∫£i Thu
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('payable-ledger')">
                            üè≠ C√¥ng N·ª£ Ph·∫£i Tr·∫£
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('cash-book')">
                            üí∞ S·ªï Qu·ªπ Ti·ªÅn M·∫∑t
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('vat-ledger')">
                            üßæ S·ªï Thu·∫ø GTGT
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('cash-flow')">
                            üìà L∆∞u Chuy·ªÉn Ti·ªÅn
                        </button>
                        <button class="accounting-tab-btn" onclick="showAccountingTab('debt-summary')">
                            üìä T·ªïng H·ª£p C√¥ng N·ª£
                        </button>
                    </div>
                    
                    <div id="accounting-tab-content" class="accounting-tab-content">
                        <div class="accounting-card">
                            <div class="accounting-card-header">
                                üè¢ H·ªá Th·ªëng K·∫ø To√°n
                            </div>
                            <div class="accounting-card-body">
                                <div style="text-align: center; padding: 40px;">
                                    <div style="font-size: 48px; margin-bottom: 20px;">üìà</div>
                                    <h3>Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá th·ªëng K·∫ø to√°n</h3>
                                    <p style="color: #6c757d; margin-top: 10px;">
                                        Ch·ªçn m·ªôt tab ·ªü tr√™n ƒë·ªÉ xem th√¥ng tin k·∫ø to√°n c·ªßa c√¥ng ty
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Th·ªëng k√™ t·ªïng quan -->
                <div class="card">
                    <div class="card-header">Th·ªëng K√™ T·ªïng Quan</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <h4>T·ªïng S·ªë Hƒê Nh·∫≠p</h4>
                            <div id="total-invoices" class="stat-value">0</div>
                        </div>
                        <div class="stat-item">
                            <h4>T·ªïng Gi√° Tr·ªã Hƒê Nh·∫≠p</h4>
                            <div id="total-invoice-value" class="stat-value">0</div>
                        </div>
                        <div class="stat-item">
                            <h4>T·ªïng S·ªë S·∫£n Ph·∫©m T·ªìn</h4>
                            <div id="total-products" class="stat-value">0</div>
                        </div>
                        <div class="stat-item">
                            <h4>T·ªïng Gi√° Tr·ªã T·ªìn Kho</h4>
                            <div id="total-stock-value" class="stat-value">0</div>
                        </div>
                    </div>
                </div>
                
                <!-- B√°o c√°o theo th√°ng -->
                <div class="card">
                    <div class="card-header">B√°o C√°o Theo Th√°ng</div>
                    <div class="form-group">
                        <label for="report-month">Ch·ªçn Th√°ng</label>
                        <input type="month" id="report-month" value="">
                    </div>
                    <button id="generate-report" class="btn-primary">T·∫°o B√°o C√°o Doanh Thu/Gi√° V·ªën</button>
                    
                    <div id="monthly-report" class="hidden report-container">
                        <h4 style="margin-top: 15px;">B√ÅO C√ÅO TH√ÅNG <span id="report-month-display"></span></h4>
                        <table class="table report-table">
                            <thead>
                                <tr>
                                    <th>Ch·ªâ Ti√™u</th>
                                    <th>Gi√° Tr·ªã</th>
                                </tr>
                            </thead>
                            <tbody id="report-data">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Modal container -->
    <div id="custom-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <span class="close" onclick="document.getElementById('custom-modal').style.display = 'none'">&times;</span>
            </div>
            <div class="modal-body" id="modal-body">
                Modal content goes here...
            </div>
        </div>
    </div>

    <script src="zip-trichxuat.js"></script>
    <script src="hoadon.js"></script>
    <script src="tonkho.js"></script>
    <script src="xuathang.js"></script>
    <script src="ketoan.js"></script>   
    <script src="ketoan_advanced.js"></script>
    <script src="app.js"></script>
</body>
</html>